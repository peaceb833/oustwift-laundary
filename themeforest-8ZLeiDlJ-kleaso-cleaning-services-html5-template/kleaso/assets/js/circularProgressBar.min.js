var CircularProgressBar=function(){"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const t={colorCircle:!1,colorSlice:"#00a1ff",end:264,fontColor:"#365b74",fontSize:"1.6rem",fontWeight:400,lineargradient:!1,number:!0,round:!1,fill:"none",unit:"%",rotation:-90,opacity:10,size:200,stroke:10};return class{constructor(r){e(this,"initial",(e=>{if("IntersectionObserver"in window){const t=new IntersectionObserver(((e,t)=>{e.map((e=>{e.isIntersecting&&e.intersectionRatio>.75&&(this.createSvg(e.target),t.unobserve(e.target))}))}),{root:null,rootMargin:"0px",threshold:1});e.map((e=>{t.observe(e)}))}else e.map((e=>{this.createSvg(e)}))})),e(this,"hex2rgb",((e,t=10)=>{const r="string"==typeof e?parseInt(e.replace("#",""),16):e;return`rgba(${r>>16}, ${(65280&r)>>8}, ${255&r}, ${t/100})`})),e(this,"progressBar",((e,t,r)=>{r.number&&e.insertAdjacentElement("beforeend",this.percentElement(r));const i=document.querySelector(`.${this.pieName}-circle-${r.index}`),n={fill:"none","stroke-width":r.stroke,"stroke-dasharray":264,"stroke-linecap":r.round?"round":""};this.setAttr(i,n,!1),i.setAttribute("style",`transform:rotate(${r.rotation}deg);transform-origin: 50% 50%`),this.animationTo({...r,element:i},!0),i.setAttribute("stroke",r.lineargradient?`url(#linear-${r.index})`:r.colorSlice);const s=r.colorCircle?"":`border-radius:50%;box-shadow:inset 0px 0px ${r.stroke}px ${r.stroke}px ${this.hex2rgb(r.colorSlice,r.opacity)}`;t.setAttribute("style",`width:${r.size}px;height:${r.size}px;position:relative;${s}`)})),e(this,"getDashOffset",((e,t,r)=>{const i=264-e/100*(r?2.64*(100-r):264);return t?-i:i})),e(this,"animationTo",((e,r=!1)=>{const i=Math.round(e.percent),n=JSON.parse(document.querySelector(`[data-index="${e.index}"]`).dataset.pie),s=document.querySelector(`.${this.pieName}-circle-${e.index}`);if(!s)return;let o=JSON.parse(s.getAttribute("data-angel"));const a=r?e:{...t,...n,...e},c=document.querySelector(`.${this.pieName}-percent-${e.index}`);if(a.animationOff)return a.number&&(c.textContent=""+a.percent),void s.setAttribute("stroke-dashoffset",this.getDashOffset(a.percent,a.inverse));if(0==i&&(a.number&&(c.textContent="0"),s.setAttribute("stroke-dashoffset",264)),i>100||i<=0||o===i)return;let l,d=r?0:o;const h=1e3/(a.speed||1e3);let u=performance.now();const p=e=>{l=requestAnimationFrame(p);const t=e-u;t>=h-.1&&(u=e-t%h,o>=a.percent?d--:d++),s.setAttribute("stroke-dashoffset",this.getDashOffset(d,a.inverse,a.cut)),c&&a.number&&(c.textContent=""+d),d===i&&(s.setAttribute("data-angel",d),cancelAnimationFrame(l))};requestAnimationFrame(p)})),e(this,"percentElement",(e=>{const t=document.createElementNS(this.svg,"text");t.insertAdjacentElement("afterbegin",this.createTspan(`${this.pieName}-percent-${e.index}`)),t.insertAdjacentElement("beforeend",this.createTspan(`${this.pieName}-unit-${e.index}`,e.unit));const r={x:"50%",y:"50%",fill:e.fontColor,"font-size":e.fontSize,"font-weight":e.fontWeight,"text-anchor":"middle",dy:e.textPosition||"0.35em"};return this.setAttr(t,r,!1),t})),e(this,"createTspan",((e,t)=>{const r=document.createElementNS(this.svg,"tspan");return r.classList.add(e),t&&(r.textContent=t),r})),e(this,"createSvg",(e=>{const r=JSON.parse(e.getAttribute("data-pie")),i=e.getAttribute("data-index"),n={...t,...r,index:i},s=document.createElementNS(this.svg,"svg"),o={role:"img",width:n.size,height:n.size,viewBox:"0 0 100 100"};this.setAttr(s,o,!1),n.colorCircle&&s.appendChild(this.circleSvg(n,"bottom")),n.lineargradient&&s.appendChild(this.gradient(n)),s.appendChild(this.circleSvg(n,"top",!0)),e.appendChild(s),this.progressBar(s,e,n)})),e(this,"gradient",(({index:e,lineargradient:t})=>{const r=document.createElementNS(this.svg,"defs"),i=document.createElementNS(this.svg,"linearGradient");i.id="linear-"+e;const n=[].slice.call(t);r.appendChild(i);let s=0;return n.map((e=>{const t=document.createElementNS(this.svg,"stop"),r={offset:s+"%","stop-color":""+e};this.setAttr(t,r,!1),i.appendChild(t),s+=100/(n.length-1)})),r})),e(this,"circleSvg",((e,t,r=!1)=>{const i=document.createElementNS(this.svg,"circle");let n={};if(e.cut){const t=264-2.64*(100-e.cut);n={"stroke-dasharray":264,"stroke-linecap":e.round?"round":"","stroke-dashoffset":e.inverse?-t:t,style:`transform:rotate(${e.rotation}deg);transform-origin: 50% 50%`}}const s={fill:e.fill,stroke:e.colorCircle,"stroke-width":e.strokeBottom||e.stroke,...n},o={cx:"50%",cy:"50%",r:42,"shape-rendering":"geometricPrecision","data-angle":r?0:"",..."top"===t?{class:`${this.pieName}-circle-${e.index}`}:s};return this.setAttr(i,o,!1),i})),e(this,"setAttr",((e,t,r=!1)=>{for(const i in t)r?e.setAttributeNS(null,i,t[i]):e.setAttribute(i,t[i])})),this.pieName=r,this.svg="http://www.w3.org/2000/svg";const i=document.querySelectorAll("."+r),n=[].slice.call(i);n.map(((e,t)=>{e.setAttribute("data-index",t+1)})),this.initial(n)}}}();
